# SmartLife Organizer v4 - Apache Configuration
# cPanel Passenger WSGI Configuration

# Passenger handles ALL requests - Python Flask app serves both API and frontend
PassengerEnabled on
PassengerAppRoot /home/ywrloefq/public_html/gm_v4
PassengerAppType wsgi
PassengerStartupFile passenger_wsgi.py
PassengerPython /home/ywrloefq/virtualenv/public_html/gm_v4/3.9/bin/python

# Disable directory browsing
Options -Indexes

# Security headers
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-XSS-Protection "1; mode=block"
    
    # CORS for API requests
    Header always set Access-Control-Allow-Origin "*"
    Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    Header always set Access-Control-Allow-Headers "Content-Type, Authorization"
</IfModule>

# Protect sensitive files
<FilesMatch "^\.env$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Python files should be handled by Passenger
<FilesMatch "\.py$">
    SetHandler None
</FilesMatch>