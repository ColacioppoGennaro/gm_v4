# SmartLife Organizer v4 - Apache Configuration
# cPanel Passenger WSGI Configuration

# Serve static files directly with Apache (bypass Passenger)
<FilesMatch "\.(js|css|png|jpg|jpeg|gif|svg|ico|woff|woff2|ttf|eot|map)$">
    PassengerEnabled off
    Header set Cache-Control "public, max-age=31536000"
</FilesMatch>

# Force correct MIME types for static files
AddType text/css .css
AddType application/javascript .js
AddType application/json .map

# Passenger handles Python app for everything else
PassengerEnabled on
PassengerAppRoot /home/ywrloefq/public_html/gm_v4
PassengerAppType wsgi
PassengerStartupFile passenger_wsgi.py
PassengerPython /home/ywrloefq/virtualenv/public_html/gm_v4/3.9/bin/python

# Disable directory browsing
Options -Indexes

# Security headers
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-XSS-Protection "1; mode=block"
    
    # CORS for API requests
    Header always set Access-Control-Allow-Origin "*"
    Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    Header always set Access-Control-Allow-Headers "Content-Type, Authorization"
</IfModule>

# Protect sensitive files
<FilesMatch "^\.env$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Python files should be handled by Passenger
<FilesMatch "\.py$">
    SetHandler None
</FilesMatch>